# Introduction of Liquibase

## 1. Why Use Liquibase?

### Liquibase can help your team deliver database changes faster, easier, and safer.

## 2. Before Liquibase

### In those enterprise teams who do not use liquibase, developers try to contribute SQL DML statements along with their JAVA code changes before each release.

### The DBAs would combine each SQL statements into one SQL script files and run them on each database of different envs (dev, qa, preprod, prod) before the JAVA code get deployed.

### However, sometimes (frequently) , individual SQL statement works, but when multiple SQL statements are combined into one SQL script file, it may contain errors which will fail the SQL script file and make it difficult to locate the error in the SQL script file. The deployment of the JAVA code for this release will fail also without the SQL script completed successfully.

<br>

## Liquibase Comes to Help

### Liquiase scripts located inside the “resource” folder of your sprintboot application. When you run your springboot application, the liquibase script will run to make changes in databases before springboot starts.

### Liquibase features:

### 1. In relational database like Mysql, MariaDB, Orale and PostgresQL, one change set of liquibase script only run once whether it is completed successfully or failed, because the liquibase framework will initially create a table in those databases to record the changeset number. When a new liquibse script were executed, its change set number will be saved to this table. Then, when you run springboot code next time, the save liquibase script will be ignored if its changeset number exists in the table.

### 2. In memory database H2, when springboot starts, all tables will be created fresh, and all liquibase code will be executed because their change set number will not be saved. So the combination of liquibase and h2 is a good validation of your liquibase script in your local computer. If there is any errors exit in liquibase script, it will be reflected and located in your local laptop before you deploy to dev, qa, pre-prod, and prod evans, in where the database is shared by other developers. If your sql script or liquibase script have errors, those errors could hurt the databases in there envs and could block other developers’ code testing.

## H2 database

### H2 database is an in-memory database, which is associated with your apringboot application. When your springboot application starts, the h2 database is created. Then liquibase scripts inside your springboot application will be executed to create the tables, set up the pk-fk relations, and insert rows into the tables accordind to liquiabse scripts. When your springboot applicaiton stops, the h2 database will be removed from the memory. It is perfect good for testing your code change and testing with data in your local laptop without affecting the shared database in the dev, qa, pre-prod and prod envs.

## Conclusio: liquibase scripts with h2 database can help creat a efficient envs for testing your java code with database changes.
